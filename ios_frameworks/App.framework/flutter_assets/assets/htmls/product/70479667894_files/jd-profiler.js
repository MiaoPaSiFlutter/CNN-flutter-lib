var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=i.n(n);window.onload=function(){o.a.init({flag:12,autoReport:!0,autoAddStaticReport:!0,autoAddImageReport:!0}),o.a.addStaticFile(["scale.css","specification.css","combine.css","scale.js","video.js","jssdk.min.js","specification.js","informant.js","unify.min.js","combine.js","zepto.min.js"])}},function(t,e,i){!function(e,i){t.exports=i()}(this,function(){"use strict";function t(t){p[t]=1}function e(t){return 0===p[t]}function i(t,e){for(var i in e)e.hasOwnProperty(i)&&void 0!==e[i]&&(t[i]=e[i])}function n(t,e){var i=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,n=i.exec(t),o=n[9];if(o&&""!==o)for(var r=o.split("&"),a=0;a<r.length;a++){var s=r[a],c=s.split("=");if(c[0]===e)return decodeURIComponent(c[1])}return!1}function o(t,e){return""===e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function r(t){var e=[];for(var i in t)if(t.hasOwnProperty(i)&&void 0!==t[i])try{e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]))}catch(n){console.log(n.message)}return e}function a(t){return this instanceof a?(this.selected=!1,this.timing={},this.isReported=!1,this.options={serverUrl:"//h5speed.m.jd.com",flag:10,profilingRate:1,autoReport:!1,autoAddStaticReport:!1,autoAddApiReport:!1,autoAddImageReport:!1},this.init(t),this.pitsData=[],this.staticFiles=[],this.customKeyValueData={},this.CONST_CREATE_TIME_MS=1550731072251,this.CONST_REASONABLE_TIME_LIMIT=6e4,this.performance=window.performance,this.isPerformanceApiAvailable="undefined"!=typeof this.performance,this.isTimingApiAvailable=this.isPerformanceApiAvailable&&"undefined"!=typeof this.performance.timing,void(this.isGetEntriesApiAvailable=this.isPerformanceApiAvailable&&"function"==typeof this.performance.getEntries)):new a(t)}var s="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)},c=[/index\.bundle\..{20,32}\.css/gi,/app\..{20,32}\.css/gi,/index\.bundle\..{20}\.js/gi,/app\..{20}\.js/gi,"unify.min.js"],p=[-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u={init:function(t){switch("object"===("undefined"==typeof t?"undefined":s(t))&&i(this.options,t),this.options.autoAddStaticReport&&(this.staticFiles=c),this.options.flag){case 12:this.options.serverUrl="//h5speed.m.jd.com/v2/speed/ware";break;case 6:case 13:case 10:this.options.serverUrl="//h5speed.m.jd.com/v2/speed/activity";break;default:this.options.serverUrl="//h5speed.m.jd.com/v2/speed/activity"}this.selected=Math.random()<this.options.profilingRate,this.options.autoReport===!0&&this.enableAutoReport()},getTimingData:function(){function t(){var t=0;return window.chrome&&"function"==typeof window.chrome.loadTimes?t=1e3*window.chrome.loadTimes().firstPaintTime:n.isTimingApiAvailable&&"number"==typeof n.performance.timing.msFirstPaint&&(t=n.performance.timing.msFirstPaint),Math.round(t)}var e,i={},n=this;i.hasPerformanceApi=n.isPerformanceApiAvailable?1:0,i.hasTimingApi=n.isTimingApiAvailable?1:0,i.hasGetEntriesApi=n.isGetEntriesApiAvailable?1:0,e=t(),i.hasFirstPaintApi=e>0?1:0;try{if(n.isTimingApiAvailable){n.performance.timing.firstPaint=e;var o=n.performance.timing;i.domainLookup=o.domainLookupEnd-o.domainLookupStart,i.redirection=o.fetchStart-o.navigationStart,i.serverConnection=o.requestStart-o.connectStart,i.request2ResponseStart=o.responseStart-o.requestStart,i.responseStart2responseEnd=o.responseEnd-o.responseStart,i.request2ResponseEnd=o.responseEnd-o.requestStart,i.domInteractive=o.domInteractive-o.navigationStart,i.domContentLoaded=o.domContentLoadedEventStart-o.navigationStart,i.firstPaint=o.firstPaint-o.navigationStart,i.pageLoad=o.loadEventStart-o.navigationStart,i.backEnd=o.responseEnd-o.navigationStart,i.frontEnd=o.loadEventStart-o.responseEnd}}catch(r){console.log(r.message)}for(var a in i)i.hasOwnProperty(a)&&void 0!==i[a]&&(i[a]<0||i[a]>n.CONST_REASONABLE_TIME_LIMIT)&&(i[a]=0);return i},traversalResources:function(t){try{var e=t.indexOf("img")>=0,i=t.indexOf("api")>=0,o=null,r={},a={};if(!this.isGetEntriesApiAvailable)return r;o=this.performance.getEntries();for(var s=0;s<o.length;s++){var c,p,u,l=o[s],d=l.name,f=l.initiatorType;if(e&&"img"==f&&d.indexOf("h5speed.m.jd.com/v1/exception")<0){var m=d.split("!")[0].split("/"),h=m[m.length-1];p=parseInt(l.duration),r[h]=p}!i||"script"!=f&&"xmlhttprequest"!=f||(c=n(d,"functionId"),c&&(u=n(d,"nickName"),p=parseInt(l.duration),u?r["api-"+u]=p:a[c]?(a[c]+=1,r["api-"+c+a[c]]=p):(a[c]=1,r["api-"+c]=p)))}return r}catch(v){console.log(v)}},report:function(){try{if(this.selected&&!this.isReported){var t=new Image,e=[];this.options.autoAddApiReport&&e.push("api"),this.options.autoAddImageReport&&e.push("img");var i=this.buildUrl(this.getServerInfo(),this.getTimingData(),this.pitsData,this.staticFiles,this.customKeyValueData,e.length>0?this.traversalResources(e):{});i&&(t.src=i),this.isReported=!0}}catch(n){console.log(n.message)}},getServerInfo:function(){var t=location.href.split("?")[0],e=document.getElementsByTagName("title")[0]&&document.getElementsByTagName("title")[0].innerText||"";return{flag:this.options.flag,sid:n(location.href,"sid")||"",libVer:"1.2.5",url:t,rts:Date.now(),title:e}},moduleReport:function(e){try{var n,a,s=[],c=new Image,p={},u="";if("[object Object]"===Object.prototype.toString.call(e)&&(e=[e]),"[object Array]"===Object.prototype.toString.call(e)&&(e.forEach(function(e){if(e.number&&e.key&&e.time){if(e.number>15)throw new Error("只提供1-15坑位上报");var i={};t(e.number),i["k"+e.number]=e.key,i["v"+e.number]=e.time,e.desc&&(i["s"+e.number]=e.desc||""),s.push(i)}}),s.length>0)){s.forEach(function(t){i(p,t)}),a=this.getServerInfo(),i(p,a),n=r(p),"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&(u=n.join("&"));var l=o("//h5speed.m.jd.com/v2/speed/event",u);l&&(c.src=l)}}catch(d){throw d}},addPits:function(i){try{var n=this;"[object Object]"===Object.prototype.toString.call(i)&&(i=[i]),"[object Array]"===Object.prototype.toString.call(i)&&i.forEach(function(i){if(i.number&&i.key&&i.time){if(!e(i.number))throw new Error("JdProfiler.addPits使用的固定坑位已经被占用，请更换");var o={};t(i.number),o["k"+i.number]=i.key,o["v"+i.number]=i.time,i.desc&&(o["s"+i.number]=i.desc||""),n.pitsData.push(o)}})}catch(o){throw o}},add:function(t){this.addKeyValues(t)},detectStaticFile:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&void 0!==t[i]&&e.push(t[i]);this.staticFiles=this.staticFiles.concat(e)},addStaticFile:function(t){try{"[object Array]"===Object.prototype.toString.call(t)&&(this.staticFiles=this.staticFiles.concat(t))}catch(e){console.log(e.message)}},addKeyValues:function(t){try{"[object Object]"===Object.prototype.toString.call(t)&&i(this.customKeyValueData,t)}catch(e){console.log(e.message)}},buildUrl:function(t,e,n,a,s,c){function p(t){function e(t,e){if(t&&e.length>0)for(var i=0,n=e.length;i<n;i++){var o=e[i];if(!t.test)return o.name.indexOf(t)!==-1?{name:t,time:o.duration}:null;var r=o.name.match(t);if(r&&r.length>0)return{name:r,time:o.duration}}}var i,n,o={},r=null;return y.isGetEntriesApiAvailable?(r=y.performance.getEntries(),t.forEach(function(t){try{if(i=t){var a=e(i,r);a&&(n=parseInt(a.time),n>=0&&(o[encodeURIComponent(a.name)]=n))}}catch(s){console.log(s.message)}}),o):o}var u,l={},d={},f=[],m=[],h=[],v={},g="",y=this;i(l,t),f=r(l),f.length>0&&(g=f.join("&"));var b=0;for(var A in e)e.hasOwnProperty(A)&&void 0!==e[A]&&(b++,h.push("p"+b+"="+e[A]));h.length>0&&(g=g+"&"+h.join("&")),y.isTimingApiAvailable&&(n.forEach(function(t){i(d,t)}),m=r(d),"[object Array]"===Object.prototype.toString.call(m)&&m.length>0&&(g=g+"&"+m.join("&"))),y.isGetEntriesApiAvailable&&(v=p(a),i(v,c),i(v,s),"[object Object]"===Object.prototype.toString.call(v)&&Object.getOwnPropertyNames(v).length>0&&(g=g+"&resources="+JSON.stringify(v)));var S=this.options.serverUrl;return u=o(S,g)},enableAutoReport:function(){var t=this;window.addEventListener("pageshow",function(){window.setTimeout(function(){t.report()},3e3)},!1)}};a.prototype=u;var l=void 0;l||(l=a({serverUrl:"//h5speed.m.jd.com",flag:10,profilingRate:1,autoReport:!1,autoAddStaticReport:!1,autoAddApiReport:!1,autoAddImageReport:!1}),l.options.autoReport===!0&&l.enableAutoReport());var d=l;return d})}]);